<!DOCTYPE html>
<html>
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<title>Cat clicker 0.1</title>
	<script>
		var cats = [
			{
				"number" : "1",
				"catName" : "Fred",
			},
			{
				"number" : "2",
				"catName" : "Ethel",
			},
			{
				"number" : "3",
				"catName" : "Ricky",
			},
			{
				"number" : "4",
				"catName" : "Lucy",
			},
			{
				"number" : "5",
				"catName" : "Groucho",
			},
		];
		
		var clicks = [0];

		var catBuilder = "<div class='cat'><div class='name' id='name%id%'>%name%</div><div class='catImg'><img id='clickableCat%id%' src='img/cat%id%.jpg'></div><div class='number' id='number%id%'>0</div></div>";

		$(document).ready(function() {
			for (i in cats) {
				// declare which cat we're working on
				var catNumber = cats[i].number;
				// add a counter for the new cat to our counter array
				clicks[catNumber] = 0;
				// build the cat in the DOM
				var builtCat = catBuilder.replace(/%id%/g, catNumber);
				console.log(builtCat);
				var namedCat = builtCat.replace("%name%", cats[i].catName);
				$("#catContainer").append(namedCat);
				// select the cat div
				var clickableId = "#clickableCat" + catNumber;
				// store the cat ID number in an IIFE, build the new click listener
				$(clickableId).click(function(numberCopy){
					return function() {
						var numberId = "#number" + numberCopy;
						clicks[numberCopy] = clicks[numberCopy] + 1;
						$(numberId).text(clicks[numberCopy]);
						}
					}(catNumber)) 
			}
		});
	</script>
</head>
<body>
	<div class="container" id="catContainer">

	</div>
</body>
</html>